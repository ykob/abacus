# 設計

## データモデル

- ユーザー: すべてのデータが紐づく。
- 取引: 案件そのものを指す。複数の見積書、請求書を持つことができる。
- 見積書: 証憑番号、件名、明細、備考を入力できる。
- 請求書: 証憑番号、件名、明細、備考を入力できる。
- 事業者情報: 自社名、所在地、電話番号、メールアドレス、振込先を入力する。見積書、請求書のPDF生成時に都度最新の事業者情報を反映する。

以下は作成しない。

- 取引先: 取引先は都度見積書、請求書に記載する。小規模事業者向けの機能にしたいので、取引先が膨大に存在するユーザーを想定していない。
- 品目: 取引先と同様、都度見積書、請求書に記載する。小規模事業者向けの機能にしたいので、品目が膨大に存在するユーザーを想定していない。

## モデルごとのデータと機能

### ユーザー

- データ
  - ID
  - ユーザー名
  - メールアドレス
- 機能
  - 登録
  - ログイン
  - ログアウト

### 取引

- データ
  - ID
  - ユーザーID
  - 取引件名
  - 取引先
  - 見積書
  - 請求書
- 機能
  - 登録
  - 編集
  - 削除

### 見積書

- データ
  - ID
  - ユーザーID
  - 発行日
  - 期限日
  - 取引先
  - 証憑番号
  - 件名
  - 明細
  - 小計
  - 消費税額
  - 合計
  - 備考
- 機能
  - 登録
  - 編集
  - 削除
  - 複製
  - 請求書へ変換
  - PDF生成

### 見積書明細

- データ
  - ID
  - ユーザーID
  - 品目名
  - 単価
  - 数量
  - 消費税率
  - 消費税額
  - 合計
  - 備考
- 機能
  - 登録
  - 編集
  - 削除

### 請求書

- データ
  - ID
  - ユーザーID
  - 発行日
  - 入金日
  - 取引先
  - 証憑番号
  - 件名
  - 明細
  - 小計
  - 消費税額
  - 合計
  - 備考
- 機能
  - 登録
  - 編集
  - 削除
  - 複製
  - PDF生成

### 請求書明細

- データ
  - ID
  - ユーザーID
  - 品目名
  - 単価
  - 数量
  - 消費税率
  - 消費税額
  - 合計
  - 備考
- 機能
  - 登録
  - 編集
  - 削除

### 事業者情報

- データ
  - ID
  - ユーザーID
  - 自社名
  - 住所
  - 電話番号
  - メールアドレス
  - 振込先
- 機能
  - 登録
  - 編集
  - 削除

## プロジェクト構成

- `apps`: 各サービス
  - `auth`: 認証サーバー
  - `api`: API
  - `ui`: UI
- `packages`: `apps`から参照する内部的なパッケージ。PrismaClientなど。
  - `auth-db`: 認証サーバー用データベース
  - `api-db`: API用データベース
  - `typescript-config`: 共通のTypeScript設定
  - `eslint-config`: 共通のESLint設定
  - `prettier-config`: 共通のPrettier設定
